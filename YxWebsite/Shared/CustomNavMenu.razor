<MudNavMenu>
    @foreach (var item in this.MenuItems)
    {
        if (item.SubItems == null)
        {
            <MudNavLink Href="@item.Link.Url">@item.Link.Name</MudNavLink>
        }
        else
        {
            <MudNavGroup @ref="@this.subMenuItems[item.Link.Name]"
                         Title="@item.Link.Name"
                         ExpandedChanged="@(e => this.ToggleExpanded(e, item.Link.Name))">

                @foreach (var subItem in item.SubItems)
                {
                    <MudNavLink Href="@subItem.Url">@subItem.Name</MudNavLink>
                }
            </MudNavGroup>
        }
    }
</MudNavMenu>

@code {
    private Dictionary<string, MudNavGroup> subMenuItems = new();

    [Parameter]
    public List<MenuItem> MenuItems { get; set; } = new();

    public record MenuItem(Link Link, List<Link>? SubItems = null);

    public record Link(string Name, string Url = "");

    private void ToggleExpanded(bool expanded, string itemName)
    {
        if (expanded)
        {
            foreach (var entry in this.subMenuItems.Where(entry => entry.Key != itemName))
            {
                entry.Value.Expanded = false;
            }
        }
    }
}